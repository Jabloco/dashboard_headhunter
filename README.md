# DASHBOARD HEADHUNTER
Небольшое приложение для постороения графиков по данным с сайта hh.ru.    

Данное readme включает в себя инструкцию по быстрому запуску приложения.    
Вопросы сбора данных по расписанию (такая возможность реализована) и запуск flask-приложения через gunicorn скорее относятся к деплою, поэтому не вкючены в данную инструкцию.    

## Приложение состоит из:
* Базы данных в которой храняться данные с hh.ru
* Модулей api_client и db_worker, которые позволяют получать данные с hh.ru и писать их в базу
* flask-приложения для отобрадения графиков

## Для запуска необходимо:
:white_check_mark: Собственно сам Python    
:white_check_mark: Redis    
:white_check_mark: SQLite    
:white_check_mark: Все зависимости из requirements.txt    

## Как запустить:
1. Ставим Python, Redis, SQLite
2. Клонируем данный репозиторий.    
3. Заходим в консоль. Переходим в папку приложения.    
    * если используете venv создайте и запустите окружение
    
    cmd
    ```
    python -m venv env
    env\Scripts\activate
    ```
    bash
    ```
    python3 -m venv env
    source env/bin/activate
    ```
4. Устанавливаем зависимости.

cmd\bash
```
pip install -r requirements.txt
```


5. Запускаем flask db upgrade. У нас появится пустая база.

cmd\bash
```
flask db upgrade
```
6. Не выходя из папки запускаем db_worker.py

cmd
```cmd
python db_worker.py
```
bash
```bash
python3 db_worker.py
```
Можно пойти погулять, посмотреть кино или заняться домашними делами.    
Первый сбор данных занимает более часа времени. Связано это в первую очередь с ограничениями, которые накладывает api hh.ru, примерно 7 req\sec\ip.    
Что бы не попасть в бан от api число запросов сокращено до 3 в секунду.    
7. Если совсем не в терпеж, а посмотреть на графики хочется работу воркера можно прервать с помощью Ctrl + C в консоли    
8. Для запуска веб части делаем    
cmd\bash
```
export FLASK_APP=dashboard_hh.py
flask run
```

